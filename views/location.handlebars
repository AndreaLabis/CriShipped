{{> style}}
{{> nav}}

<div class="location-container bg-white">
    <h4 id="map-h4">{{ location.city }}, {{location.state}} Information</h4>
    <hr>
    <marquee>
        <span class="ml-3 mb-3"><strong>COVID-19 Pandemic </strong> <span
                class=" glyphicon glyphicon-forward p-3"></span>
            {{ covidData.affectedCountries }} nations affected <span class=" glyphicon glyphicon-forward p-3"></span>
            {{ covidData.cases }} total cases
            <span class="glyphicon glyphicon-forward p-3"></span> {{ covidData.active }} active cases
            <span class="glyphicon glyphicon-forward p-3"></span> {{ covidData.deaths }} total deathes
        </span>
    </marquee>
    <div class="forecast-table">
        <div class="a-container">
            <div class="forecast-container">
                <div class="today forecast">
                    <div class="forecast-header">
                        <div class="day">Current weather in {{location.city}}</div>
                        <div class="date"></div>

                    </div> <!-- .forecast-header -->
                    <div class="forecast-content">
                        <div class="location">{{ nowCast.shortForecast }}</div>
                        <div class="degree">
                            <div class="num">{{ nowCast.temperature }}<sup>o</sup>{{ nowCast.temperatureUnit }}</div>
                            <div class="forecast-icon">
                                <img src="{{nowCast.icon}}" alt="" width=90>
                            </div>
                        </div>
                        <span>{{ this.shortForecast }}</span>
                        <span>{{ nowCast.windSpeed }}km/h</span>
                        <span>{{ nowCast.windDirection }}</span>
                    </div>
                </div>
                {{#each sevenDayNWS}}
                {{#if @first}}
                {{else}}
                {{#if this.isDaytime }}
                <div class="forecast">
                    <div class="forecast-header">
                        <div class="day">{{this.name}}</div>
                    </div> <!-- .forecast-header -->
                    <div class="forecast-content">
                        <div class="forecast-icon">
                            <img src="{{this.icon}}" alt="" width=48>
                        </div>
                        <div class="degree">{{this.temperature}}<sup>o</sup>{{ this.temperatureUnit }}
                        </div>
                        <small>{{#nextItem ../sevenDayNWS @index}} {{ this.temperature }}
                            {{/nextItem}}<sup>o</sup></small>
                    </div>
                </div>
                {{/if}}
                {{/if}}
                {{/each}}
            </div>
        </div>
    </div>

    <div class="grid-container">
        <div class="col">
            <div id="map"></div>
        </div>
        <div class="col">
            <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                    <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
                    <li data-target="#carouselExampleCaptions" data-slide-to="3"></li>
                    <li data-target="#carouselExampleCaptions" data-slide-to="4"></li>
                </ol>
                <div class="carousel-inner">
                    {{#each newsData}}
                    {{#if @first}}
                    <div class="carousel-item active">
                        <img src="{{this.urlToImage}}" class="news d-block w-100" alt="...">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>{{this.title}}</h5>
                            <p>{{this.description}}</p>
                            <a href="{{this.url}}" target="_blank"><i class="fas fa-link"></i> Get Story</a>
                        </div>
                    </div>

                    {{else}}
                    <div class="carousel-item">
                        <img src="{{this.urlToImage}}" class="news d-block w-100" alt="...">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>{{this.title}}</h5>
                            <p>{{this.description}}</p>
                            <a href="{{this.url}}" target="_blank"><i class="fas fa-link"></i> Get Story</a>
                        </div>
                    </div>
                    {{/if}}
                    {{/each}}
                </div>
                <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
</div>

<script>
    let long = "{{ longitude }}";
    let lat = "{{ latitude }}";
</script>
<script src="/js/location.js"></script>